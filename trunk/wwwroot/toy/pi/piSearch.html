<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="Content-Language" content="zh-CN" />
		<meta name="robots" content="all" />
		<meta name="author" content="allentro@gmail.com, Allentro" />
		<meta name="copyright" content="www.sansi.org" />
		<meta name="description" content="搜索π" />
		<meta name="keywords" content="搜索Pi" />
		<title>搜索π</title>		
		<style type="text/css">
			@import "../style/main.css";
			@import "style.css";
		</style>
		<script type="text/javascript" src="../lib/prototype.js"></script>
	</head>
	
	<body>
		<script type="text/javascript">
			function formatQ(q, ns, p0)
			{
				q = q.replace(ns, "<span class=\"red\">" + ns + "</span>");
				var i;
				var m;
				m = 0;
				var l = q.length;
				var s;
				s = "";
				var c;
				var n = 0;
				for (i = 0; i < l; i ++)
				{
					c = q.substring(i, i + 1);
					if(!isNaN(c) && c != " ")
					{
						if(m == 0)
						{
							s += "<div class=\"pst\">第 " + (p0 + n * 100) + " 位</div>";
						}
						s += c;
						m ++;
						if(m % 10 == 0)
						{
							s += " ";
						}
						if(m == 100)
						{
							s += "<br />";
							m = 0;
							n ++;
						}
					}
					else
					{
						s += c;
					}
				}
				//alert(s);
				return s;
				
				/* q = q.replace(ns, "<span class=\"red\">" + ns + "</span>");
				q = q.replace(/(\d{100})/g, "$1<br />");
				return q; */
			}
			
			/* var myGlobalHandlers = {
					onCreate: function(){
						Element.show("schStatus");
					},
					onComplete: function() {
						if(Ajax.activeRequestCount == 0){
							Element.hide("schStatus");
						}
					}
				};
			Ajax.Responders.register(myGlobalHandlers); */
			
			function chkSearchNs()
			{
				if(window.event.keyCode == 13)
				{
					searchNs();
				}
				
				return false;
			}
			
			function searchNs()
			{
				var ns = $("numStr").value;
				if(ns.length == 0)
				{
					$("schStatus").style.display = "inline";
					$("schStatus").innerHTML = "<span class=\"red\">查詢不能爲空，請重新輸入！</span>";
					$("numStr").focus();
					return false;
				}
				if(!isNaN(ns))
				{
					$("schStatus").style.display = "inline";
					$("schStatus").innerHTML = "<img src=\"../images/indicator_flower.gif\" alt=\"indicator\" /> 正在搜索 \"" + ns + "\" ，請稍候 ...";
					var u;
					u = "piSearch.py"
					var myAjax = new Ajax.Request(
						u,
						{
						method: 'get',
						parameters: "ns=" + ns + "&r=" + Math.random(),
						onComplete: searchNs2
						});
					
					return false;
				}
				else
				{
					$("schStatus").style.display = "inline";
					$("schStatus").innerHTML = "<span class=\"red\">您輸入的 \"" + ns + "\" 不是數字串，請重新輸入！</span>";
					$("numStr").focus();
				}
				
				return false;
			}
			
			function searchNs2(originalRequest)
			{
				var q;
				try
				{
					var r = originalRequest.responseXML;
					var isValid = r.getElementsByTagName("isValid")[0].firstChild.data;
					var ns = r.getElementsByTagName("ns")[0].firstChild.data;
					
					if(isValid == "True")
					{
						var firstFindAt = r.getElementsByTagName("firstFindAt")[0].firstChild.data;
						var query = r.getElementsByTagName("query")[0].firstChild.data;
						var t = r.getElementsByTagName("time")[0].firstChild.data;
						
						q = query;
						var p0;
						p0 = firstFindAt - q.indexOf(ns);
						q = formatQ(q, ns, p0);
						q += "<br />我們在小數點後第 <strong>" + firstFindAt + "</strong> 位發現了您輸入的數字串，耗時 " + t + " 秒！";
						$("searchResult").innerHTML = q;
						$("schStatus").style.display = "none";
					}
					else
					{
						q = "沒有找到數字串 " + ns + " ！ :(";
						$("schStatus").style = "inline";
						$("schStatus").innerHTML = q;
					}					
				}
				catch(e)
				{
					//q = e.message;
					q = "對不起，我們在π的前 33,554,432 位沒有找到 \"" + ns + "\" ！ :(";
					$("schStatus").style.display = "inline";
					$("schStatus").innerHTML = "<span class=\"red\">" + q + "</span>";
				}
				//$("searchState").innerHTML = "";
				$("numStr").focus();
			}
		</script>
		<!-- wrapper -->
		<div id="wrapper">
			<div id="wrapper2">
				<h1><a name="top"></a>搜索π</h1>
				
				<p>
					在此輸入您想查找的數字串 <input type="text" size="30" maxlength="50" id="numStr" onkeydown="chkSearchNs();" /> <input type="button" id="btn" value=" 搜 索 " onclick="searchNs();" /> <span id="schStatus"></span>
				</p>
				
				<p><div id="srBox"><div id="searchResult" class="infoBox">
<pre>
π = 3.
1415926535 8979323846 2643383279 5028841971 6939937510 5820974944 5923078164 0628620899 8628034825 3421170679 
8214808651 3282306647 0938446095 5058223172 5359408128 4811174502 8410270193 8521105559 6446229489 5493038196 
4428810975 6659334461 2847564823 3786783165 2712019091 4564856692 3460348610 4543266482 1339360726 0249141273 
7245870066 0631558817 4881520920 9628292540 9171536436 7892590360 0113305305 4882046652 1384146951 9415116094 
3305727036 5759591953 0921861173 8193261179 3105118548 0744623799 6274956735 1885752724 8912279381 8301194... 
</pre>
				</div></div></p>
				
				<div style="width:100%;text-align:center;margin-bottom:20px;">
						<script type="text/javascript"><!--
						google_ad_client = "pub-3486559051020695";
						google_ad_width = 468;
						google_ad_height = 15;
						google_ad_format = "468x15_0ads_al_s";
						//2007-06-20: url
						google_ad_channel = "4356071401";
						//-->
						</script>
						<script type="text/javascript"
						  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
						</script>
					</div>

				<p>
					<h2>內容</h2>
					<ul>
						<li><a href="#0">更新記錄</a></li>
						<li><a href="#1">什麽是“搜索π”</a></li>
						<li><a href="#2">爲什麽要搜索π</a></li>
						<li><a href="#3">我輸入的數字串爲什麽找不到？</a></li>
						<li><a href="#4">關於本頁面</a></li>
						<li><a href="#5">關於π的更多</a></li>
					</ul>
				</p>
				
				<p>
					<h2><a name="0"></a>更新記錄</h2>
					<blockquote>
					2006-12-10 修改了樣式表，使版面能夠在IE 6.0上正常顯示（OH~，今天除了修改這個樣式表外，還乘坐了六個多小時的汽車，旅程長達四百多公里）<br />
					2006-11-12 修改、加以完善，並發佈<br />
					2006-11-11 制作本頁面<br />
					2006-11-04 計算出了π小數點後的前三千萬位<br />
					2006-11-03 有了制作這個頁面的想法
					</blockquote>
				</p>
				
				<p>
					<h2><a name="1"></a>什麽是“搜索π”</h2>
					<blockquote>“搜索π”是一個小玩具，用於搜索一個數字串在圓週率π小數點後<strong>第一次</strong>出現的位置。
					我們知道，圓週率π = 3.1415926...，我們將小數點後第一位數字“1”稱爲第一位，每二位數字“4”稱爲第二位，第三位數字“1”稱爲第三位，...，
					如此不斷地繼續下去。</blockquote>
				</p>
				
				<p>
					<h2><a name="2"></a>爲什麽要搜索π</h2>
					<blockquote>
					搜索π在很多時候都僅僅只是爲了好玩，比如，您可以輸入您的生日或紀念日（如820915或20061112），查找一下這個日期在π中第一次出現的位置。
					這個創意來自於國外一個網站<a href="http://www.angio.net/pi/piquery" target="_blank">The Pi-Search Page<sup>N</sup></a>，這個想法本身並沒有什麽很實際的意義，制作它僅僅是因爲覺得有趣，
					同時也是爲了練習一下相關的編程知識。
					需要說明的是，雖然本頁面的創意來自於其它站點，但主要及核心的部分都是我們自己編寫的。
					</blockquote>
				</p>
				
				<p>
					<h2><a name="3"></a>我輸入的數字串爲什麽找不到？</h2>
					<blockquote>我們目前的數據只到π小數點後三千萬位，確切地說，是到小數點後 33,554,432 位，有一些較長的數字串可能在這個範圍內沒有出現。
					您可以參攷下表：<br /><br />
							前一億位的搜索概率：<br />
					<table cellpadding="0" cellspacing="0">
						<tbody>
							<tr class="tr1">
								<td>數字串長度</td><td>搜到的概率</td>
							</tr>							<tr>
								<td>1-5</td><td>100%</td>
							</tr>
							<tr>
								<td>6</td><td>接近 100%</td>
							</tr>
							<tr>
								<td>7</td><td>99.995%</td>
							</tr>
							<tr>
								<td>8</td><td>63%</td>
							</tr>
							<tr>
								<td>9</td><td>9.5%</td>
							</tr>
							<tr>
								<td>10</td><td>0.995%</td>
							</tr>
							<tr>
								<td>11</td><td>0.09995%</td>
							</tr>
						</tbody>
					</table>
					（同樣地，這個統計表來自於<a href="http://www.angio.net/pi/piquery" target="_blank">The Pi-Search Page<sup>N</sup></a>，
					在這個頁面還有更詳細的說明：<a href="http://www.angio.net/pi/whynotpi.html" target="_blank">Probability of Finding Strings In Pi<sup>N</sup></a>）
					</blockquote>
				</p>
				
				<p>
					<h2><a name="4"></a>關於本頁面</h2>
					<blockquote>
					制作本頁面只是爲了好玩，並不存在任何商業和政治目的。<br />
					本頁面的制作技術主要爲Ajax（前台）與<a href="http://www.python.org" target="_blank">Python<sup>N</sup></a>（後台）。感謝互聯網的發展，基於Ajax的數據傳遞現在已經如此方便和完美，也感謝Python的開發和支持團隊，用Python操作文本的確是非常的方便與高效。<br /><br />
					目前我們只有前三千多萬位的數據，今後有機會我們可能會繼續追加，以便讓大家能查找到更多的數字串。
					</blockquote>
				</p>
				
				<p>
					<h2><a name="5"></a>關於π的更多</h2>
					<blockquote>
					關於π的更多，大家可以去網絡上搜索，比如下面的搜索鏈接：<br />
					<a href="http://www.google.cn/custom?domains=www.sansi.org&q=%A6%D0&sa=%CB%D1%CB%F7&sitesearch=&client=pub-3486559051020695&forid=1&ie=GB2312&oe=GB2312&cof=GALT%3A%23008000%3BGL%3A1%3BDIV%3A%23336699%3BVLC%3A663399%3BAH%3Acenter%3BBGC%3AFFFFFF%3BLBGC%3Affffff%3BALC%3A0000FF%3BLC%3A0000FF%3BT%3A000000%3BGFNT%3A0000FF%3BGIMP%3A0000FF%3BLH%3A60%3BLW%3A160%3BL%3Ahttp%3A%2F%2Fwww.sansi.org%2Fimages%2Flogo.gif%3BS%3Ahttp%3A%2F%2F%3BFORID%3A1&hl=zh_CN" target="_blank">點擊這兒在Google上搜索π<sup>N</sup></a>
					</blockquote>
				</p>
				
				<p class="google_ad" style="text-align:center;padding:20px 0;">
					<script type="text/javascript"><!--
					google_ad_client = "pub-3486559051020695";
					google_ad_width = 728;
					google_ad_height = 90;
					google_ad_format = "728x90_as";
					google_ad_type = "text_image";
					//2007-06-21: Toy
					google_ad_channel = "7546981696";
					google_color_border = "336699";
					google_color_bg = "FFFFFF";
					google_color_link = "0000FF";
					google_color_text = "000000";
					google_color_url = "008000";
					//-->
					</script>
					<script type="text/javascript"
					  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
					</script>
				</p>
				
				<p>
					<hr noshade="noshade" />
					Ver: 7.5.10 <a href="http://www.sansi.org">Sansi.Org</a><br />
					Best Viewed on IE 6.0+, Firefox 2.0+, Opera 9.02+<br />
					聯系作者：如果您有需要，可以通這個 Email 地址聯系到我們：sansi.org@gmail.com，感謝您對本頁面的關注。<br />
					<a href="#top">返回頂部</a>
				</p>
			</div>
		</div>
		<!-- end of wrapper -->
		<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
		<script type="text/javascript">
			_uacct = "UA-307069-4";
			urchinTracker();
		</script>
	</body>
</html>
